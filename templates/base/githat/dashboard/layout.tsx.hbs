{{#unless includeDashboard}}{{else}}
'use client';

import { UserButton, OrgSwitcher } from '@githat/nextjs';
import { AuthGuard } from '../auth/guard{{#unless typescript}}.jsx{{/unless}}';
import { githatConfig } from '../config{{#unless typescript}}.js{{/unless}}';
{{#ifEquals framework "nextjs"}}
import Link from 'next/link';
import { usePathname } from 'next/navigation';
{{else}}
import { Link, useLocation } from 'react-router-dom';
{{/ifEquals}}

const navItems = [
  { label: 'Overview', href: '/dashboard' },
  { label: 'Apps', href: '/dashboard/apps' },
{{#if includeOrgManagement}}
  { label: 'Members', href: '/dashboard/members' },
  { label: 'Settings', href: '/dashboard/settings' },
{{/if}}
{{#if includeMcpModule}}
  { label: 'MCP Servers', href: '/dashboard/mcp' },
{{/if}}
{{#if includeAgentModule}}
  { label: 'AI Agents', href: '/dashboard/agents' },
{{/if}}
];

export function DashboardLayout({ children }{{#if typescript}}: { children: React.ReactNode }{{/if}}) {
{{#ifEquals framework "nextjs"}}
  const pathname = usePathname();
{{else}}
  const { pathname } = useLocation();
{{/ifEquals}}

  return (
    <AuthGuard>
      <div style=\{{ display: 'flex', minHeight: '100vh', background: '#09090b' }}>
        {/* Sidebar */}
        <aside style=\{{ width: '16rem', borderRight: '1px solid #1e1e2e', padding: '1.5rem 1rem', display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
          <h2 style=\{{ fontSize: '1.125rem', fontWeight: 700, color: '#fafafa', padding: '0 0.75rem', marginBottom: '1rem' }}>
            {githatConfig.appName}
          </h2>
          <nav style=\{{ display: 'flex', flexDirection: 'column', gap: '0.25rem' }}>
            {navItems.map((item) => (
              <Link
                key={item.href}
{{#ifEquals framework "nextjs"}}
                href={item.href}
{{else}}
                to={item.href}
{{/ifEquals}}
                style=\{{
                  padding: '0.5rem 0.75rem',
                  borderRadius: '0.375rem',
                  color: pathname === item.href ? '#fafafa' : '#71717a',
                  background: pathname === item.href ? '#1e1e2e' : 'transparent',
                  textDecoration: 'none',
                  fontSize: '0.875rem',
                  fontWeight: pathname === item.href ? 600 : 400,
                }}
              >
                {item.label}
              </Link>
            ))}
          </nav>
        </aside>

        {/* Main content */}
        <div style=\{{ flex: 1, display: 'flex', flexDirection: 'column' }}>
          <header style=\{{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end', gap: '1rem', padding: '1rem 2rem', borderBottom: '1px solid #1e1e2e' }}>
            <OrgSwitcher />
            <UserButton />
          </header>
          <main style=\{{ flex: 1, padding: '2rem' }}>
            {children}
          </main>
        </div>
      </div>
    </AuthGuard>
  );
}
{{/unless}}
